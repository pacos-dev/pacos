CREATE SEQUENCE IF NOT EXISTS SYSTEM_VARIABLE_SEQ START WITH 1 INCREMENT BY 1;
create table IF NOT EXISTS PUBLIC.APP_SYSTEM_VARIABLE
(
    ID          INTEGER GENERATED BY DEFAULT AS SEQUENCE SYSTEM_VARIABLE_SEQ PRIMARY KEY not null,
    DESCRIPTION VARCHAR(255),
    JS          CLOB,
    NAME        VARCHAR(255) not null
        constraint UK_SYS_VAR_NAME
            unique
);

CREATE SEQUENCE IF NOT EXISTS USER_VARIABLE_COL_SEQ START WITH 1 INCREMENT BY 1;
create table IF NOT EXISTS PUBLIC.APP_USER_VARIABLE_COLLECTION
(
    ID      INTEGER GENERATED BY DEFAULT AS SEQUENCE USER_VARIABLE_COL_SEQ PRIMARY KEY not null,
    GLOBAL  BOOLEAN,
    NAME    VARCHAR(255) not null,
    USER_ID INTEGER      not null,
    FOREIGN KEY (USER_ID) REFERENCES PUBLIC.APP_USER (id)
        ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE SEQUENCE IF NOT EXISTS USER_VARIABLE_SEQ START WITH 1 INCREMENT BY 1;
create table IF NOT EXISTS PUBLIC.APP_USER_VARIABLE
(
    ID            INTEGER GENERATED BY DEFAULT AS SEQUENCE USER_VARIABLE_SEQ PRIMARY KEY not null,
    COLLECTION_ID INTEGER
        constraint FK_US_VAR_COL references PUBLIC.APP_USER_VARIABLE_COLLECTION,
    CURRENT_VALUE VARCHAR(255),
    ENABLED       BOOLEAN,
    INITIAL_VALUE VARCHAR(255),
    NAME          VARCHAR(255) not null,
    constraint UNIQ_NAME_COLL_UV
        unique (NAME, COLLECTION_ID)
);
