CREATE TABLE if not exists APP_PERMISSION
(
    key         VARCHAR(255) PRIMARY KEY,
    label       VARCHAR(255),
    category    VARCHAR(255),
    description    VARCHAR(2000),
    );
CREATE SEQUENCE if not exists APP_PERMISSION_USER_SEQ START WITH 1 INCREMENT BY 1;
CREATE TABLE if not exists APP_PERMISSION_USER
(
    id         INTEGER GENERATED BY DEFAULT AS SEQUENCE APP_PERMISSION_USER_SEQ PRIMARY KEY not null,
    user_id    INTEGER       NOT NULL REFERENCES APP_USER (id) ON DELETE CASCADE,
    action_key VARCHAR(255) NOT NULL REFERENCES APP_PERMISSION (key) ON DELETE CASCADE,
    decision   VARCHAR(16)  NOT NULL CHECK (decision IN ('ALLOW', 'DENY')),
    UNIQUE (user_id, action_key)
    );
CREATE TABLE IF NOT EXISTS APP_PERMISSION_DEF (
                                               action_key VARCHAR(255) PRIMARY KEY
    REFERENCES APP_PERMISSION(key) ON DELETE CASCADE,
    decision  VARCHAR(16) NOT NULL CHECK (decision IN ('ALLOW', 'DENY'))
    );